<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Client Side Pagination in TreeGrid - jQuery EasyUI Demo</title><link rel="stylesheet" href="../../themes/default/easyui.css"><link rel="stylesheet" href="../../themes/icon.css"><link rel="stylesheet" href="../demo.css"><script src="../../jquery.min.js"></script><script src="../../jquery.easyui.min.js"></script></head><body><h2>Client Side Pagination in TreeGrid</h2><p>This sample shows how to implement client side pagination in TreeGrid.</p><div style="margin:20px 0"></div><table id="tg" title="Client Side Pagination" style="width:700px;height:250px" data-options="
				iconCls: 'icon-ok',
				rownumbers: true,
				animate: true,
				collapsible: true,
				fitColumns: true,
				url: 'treegrid_data2.json',
				method: 'get',
				idField: 'id',
				treeField: 'name',
				pagination: true,
				pageSize: 2,
				pageList: [2,5,10]
			"><thead><tr><th data-options="field:'name',width:180">Task Name</th><th data-options="field:'persons',width:60,align:'right'">Persons</th><th data-options="field:'begin',width:80">Begin Date</th><th data-options="field:'end',width:80">End Date</th><th data-options="field:'progress',width:120,formatter:formatProgress">Progress</th></tr></thead></table><script>function formatProgress(e){return e?'<div style="width:100%;border:1px solid #ccc"><div style="width:'+e+'%;background:#cc0000;color:#fff">'+e+"%</div>":""}!function(c){function l(e){c.isArray(e)&&(e={total:e.length,rows:e});var n=this,t=c(n),r=t.data("treegrid"),a=t.treegrid("options");if(r.allRows||(r.allRows=e.rows),!a.remoteSort&&a.sortName){var l=a.sortName.split(","),d=a.sortOrder.split(",");r.allRows.sort(function(e,t){for(var r=0,a=0;a<l.length;a++){var o=l[a],i=d[a];if(0!=(r=(c(n).treegrid("getColumnOption",o).sorter||function(e,t){return e==t?0:t<e?1:-1})(e[o],t[o])*("asc"==i?1:-1)))return r}return r})}var o=[],i=[];c.map(r.allRows,function(e){e._parentId?i.push(e):o.push(e),e.children=null}),e.total=o.length;var s=t.treegrid("getPager");s.pagination("refresh",{total:e.total,pageNumber:a.pageNumber}),a.pageNumber=s.pagination("options").pageNumber||1;var g=(a.pageNumber-1)*parseInt(a.pageSize),u=g+parseInt(a.pageSize);return e.rows=o.slice(g,u).concat(i),e}var a=c.fn.treegrid.methods.append,o=c.fn.treegrid.methods.remove,r=c.fn.treegrid.methods.loadData;c.extend(c.fn.treegrid.methods,{clientPaging:function(e){return e.each(function(){var r=c(this),a=r.data("treegrid"),o=a.options;o.loadFilter=l;var i=o.onBeforeLoad;o.onBeforeLoad=function(e,t){return a.allRows=null,i.call(this,e,t)};var n=r.treegrid("getPager");n.pagination({onSelectPage:function(e,t){o.pageNumber=e,o.pageSize=t,n.pagination("refresh",{pageNumber:e,pageSize:t}),r.treegrid("loadData",a.allRows)}}),r.treegrid("loadData",a.data),o.url&&r.treegrid("reload")})},loadData:function(e,t){return e.each(function(){c(this).data("treegrid").allRows=null}),r.call(c.fn.treegrid.methods,e,t)},append:function(e,r){return e.each(function(){var t=c(this).data("treegrid");t.options.loadFilter==l?(c.map(r.data,function(e){e._parentId=e._parentId||r.parent,t.allRows.push(e)}),c(this).treegrid("loadData",t.allRows)):a.call(c.fn.treegrid.methods,c(this),r)})},remove:function(e,r){return e.each(function(){c(this).treegrid("find",r)&&o.call(c.fn.treegrid.methods,c(this),r);var e=c(this).data("treegrid");if(e.options.loadFilter==l){for(var t=0;t<e.allRows.length;t++)if(e.allRows[t][e.options.idField]==r){e.allRows.splice(t,1);break}c(this).treegrid("loadData",e.allRows)}})},getAllRows:function(e){return e.data("treegrid").allRows}})}(jQuery),$(function(){$("#tg").treegrid().treegrid("clientPaging")})</script></body></html>